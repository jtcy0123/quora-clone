<% if current_user.nil? %>
  <h3>MOST RECENT QUESTIONS</h3>
  <h2 style="text-align: center;"><i>Log in to see more</i></h2>
<% else %>
  <h3>QUESTIONS FROM ALL USERS</h3>
<% end %>

<% @questions.each do |q| %> <% u = User.find(q.user_id) %>
  <% if !current_user.nil? && u.id == current_user.id %>
    <% by = "you" %>
  <% else %>
    <% by = u.first_name.upcase  %>
  <% end %>
  <div class="panel panel-default">
    <div class="panel-heading">Subject:&ensp;<span class="badge w3-white w3-border"><%= Answer.where(question_id: q.id).length %> answers</span><br><a href="/questions/<%= q.id %>/answers"><b><%= q.subject %></b></a>
    <div style="text-align: right; font-size: 10px">created on&nbsp;<%= q.created_at.strftime('%Y-%m-%d') %>&nbsp;by&nbsp;<%= by %></div></div>
    <div class="panel-body">

    <% if q.description.length == 0%>
      <i style="color: #ccc">NO DESCRIPTION</i></div>
    <% else %>
      <i style="color: #ccc">DESCRIPTION:</i><br><%= q.description %></div>
    <% end %>
    
     <form class="voteForm" style='display:inline;' method='post' action='/questions/<%= q.id %>/add'>

     <% if current_user && @list.find_by_question_id(q.id) != nil %>
      <button type="submit" id="voteBtn" class="btn btn-primary"><i id="like<%= q.id %>">liked</i>
      <% else %>
      <button type="submit" id="voteBtn" class="btn btn-info"><i id="like<%= q.id %>">like</i>
      <% end %></button>

      <i id="vote<%= q.id %>" class="fa fa-thumbs-up">&nbsp;<%= @votes[q.id] ||= 0 %></i>
    </form>

    <% if current_user.nil? %>
    <a href="/questions/<%= q.id %>/answers/new"><button id="ansBtn" class="btn btn-default" style="color: #ccc"><i class="fa fa-pencil">Answer</i></button></a>
    <% else %>
    <a href="/questions/<%= q.id %>/answers/new"><button id="ansBtn" class="btn btn-default"><i class="fa fa-pencil">Answer</i></button></a>
    <% end %>

  </div>
<% end %>

<button onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-black">Open Modal</button>

<div id="id01" class="w3-modal">
  <div class="w3-modal-content">
    <div class="w3-container">
      <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
      <p>Some text. Some text. Some text.</p>
      <p>Some text. Some text. Some text.</p>
    </div>
  </div>
</div>
